trigger:
- main

pool:
  vmImage: ubuntu-latest

stages:
  - stage: Build
    jobs:
    - job: job1
      steps:
      - task: NodeTool@0
        inputs:
          versionSpec: '14.x'
        displayName: 'Install Node.js'

      - script: |
          npm install
          npm run build
        displayName: 'Install and build React app'

      - task: Docker@2
        inputs:
          command: 'build'
          Dockerfile: '$(Build.SourcesDirectory)/Dockerfile'  # Path to your Dockerfile
          tags: |
            $(Build.Repository.Name):$(Build.BuildId)
          containerRegistry: 'customersapp.azurecr.io'  # Azure Container Registry connection name
          buildContext: '$(Build.SourcesDirectory)'

